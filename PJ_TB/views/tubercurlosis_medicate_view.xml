<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <record id="medicate_action" model="ir.actions.act_window">
    <field name="name">Medicate</field>
    <field name="res_model">ir.medicate</field>
    <field name="view_mode">tree,form</field>
    <field name="help" type="html">
      <p class="oe_view_nocontent_create">
        Create the first Medicate
      </p>
    </field>
  </record>

  <menuitem id="medicate_children_menu" name="Medicate" parent="medicate_menu" action="medicate_action" sequence ="3" groups="PJ_TB.group_hospital_doctor"/>

  <record id="ir_medicate_view_form" model="ir.ui.view">
    <field name="name">ir.medicate.view.form</field>
    <field name="model">ir.medicate</field>
    <field name="arch" type="xml">
      <form string="Medicate">
        <sheet>
          <div class="oe_title">
            <h1>
              <field name="medicate_seq"/>
            </h1>
          </div>
          <group string='Medicate Dispent'>
            <group>
              <field name="patient_id"/>
              <field name="date_dispensing"/>
              <field name="date_appointment_medicate"/>
            </group>
            <group>
              <field name="medicate_state"/>
              <field name="medicate_dispent_count" force_save="1"/>
            </group>
          </group>
          <group string='Pharmacy'>
            <group>
              <field name="pharmacy" string='Name'/>
            </group>
          </group>
          <notebook>
            <page string="List Medicate Dispent">
              <field name="medicate_lists">
                <tree editable="bottom">
                  <field name="medicament" />
                  <field name="dose" />
                  <field name="frequency" />
                  <field name="treament_duration" />
                  <field name="quantity" />
                  <field name="unit_price" force_save='1'/>
                </tree>
              </field>
              <group class="oe_subtotal_footer oe_right">
                <field name="medicate_total"/>
              </group>
            </page>
          </notebook>
        </sheet>
      </form>
    </field>
  </record>

  <record id="ir_medicate_view_tree" model="ir.ui.view">
    <field name="name">ir.medicate.view.tree</field>
    <field name="model">ir.medicate</field>
    <field name="arch" type="xml">
      <tree>
        <field name="medicate_seq" />
        <field name="date_dispensing" />
        <field name="date_appointment_medicate" />
        <field name="patient_name" string="Patient"/>
        <field name="pharmacy" />
        <field name="medicate_state"/>
        <field name="medicate_dispent_count" />
      </tree>
    </field>
  </record>
</odoo>
