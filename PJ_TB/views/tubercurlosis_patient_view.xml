<?xml version="1.0" encoding="utf-8"?>
<odoo>

  <record model="ir.actions.act_window" id="hospital_main_action">
    <field name="name">Patient</field>
    <field name="res_model">hr.patient</field>
    <field name="view_mode">tree,form</field>
    <field name="help" type="html">
      <p class="oe_view_nocontent_create">
        Create the first Patient
      </p>
    </field>
  </record>

  <menuitem id="main_tb_menu" name="Hospital Tuberculosis" />
  <menuitem id="patient_root_menu" name="Patients" parent="main_tb_menu" sequence ="0"/>
  <menuitem id="appointments_menu" name="Appointments" parent="main_tb_menu" sequence ="1"/>
  <menuitem id="medicate_menu" name="Medicate" parent="main_tb_menu" sequence ="2"/>
  <menuitem id="diagnostic_menu" name="Laboratory" parent="main_tb_menu" sequence ="3"/>
  <menuitem id="patient_menu" name="Patient" parent="patient_root_menu" action="hospital_main_action" sequence ="1"/>


  <record model="ir.ui.view" id="hr_patient_view_tree">
    <field name="name">tb_patient_tree</field>
    <field name="model">hr.patient</field>
    <field name="arch" type="xml">
      <tree>
        <field name="PT_name"/>
        <field name="PT_gender"/>
        <field name="PT_age"/>
        <field name="PT_address"/>
      </tree>
    </field>
  </record>

  <record id="hr_patient_view_form" model="ir.ui.view">
    <field name="name">tb_patient_form</field>
    <field name="model">hr.patient</field>
    <field name="arch" type="xml">
      <form string="Patient Form">
        <sheet>
          <div class="oe_title">
            <h1>
              <field name="PT_name" placeholder="Name Patient"/>
            </h1>
          </div>
          <group string='General Information'>
            <group>
              <field name="PT_id_card"/>
              <field name="PT_gender"/>
              <field name="PT_birthday"/>
              <field name="PT_age" force_save="1"/>
            </group>
            <group>
              <field name="PT_tel" widget="phone"/>
              <field name="PT_email" widget="email"/>
              <field name="PT_address"/>
            </group>
          </group>
          <notebook>
            <page string="Critical Patient Information">
              <group>
                <group>
                  <field name="PT_congenital_disease"/>
                  <field name="PT_allergy"/>
                </group>
              </group>
            </page>
            <page string="Medication">
              <group>
                <field name="medicates" string='History Dispent Medicate'>
                  <tree>
                    <field name="medicate_seq" />
                    <field name="date_dispensing" />
                    <field name="date_appointment_medicate" />
                    <field name="pharmacy" />
                    <field name="medicate_state" />
                    <field name="medicate_dispent_count" />
                  </tree>
                </field>
              </group>
            </page>
            <page string="Vaccinations">
              <!-- <field name="line_ids"/> -->
            </page>
            <page string="Lab Results">
              <field name="lab_requsets" readonly="1">
                <tree editable="bottom">
                  <field name="lab_type"/>
                  <field name="lab_date"/>
                  <field name="lab_doctor"/>
                </tree>
              </field>
            </page>
            <page string="Lab Results">
              <field name="patient_main_lines">
                <tree>
                  <field name="relation_id"/>
                  <field name="labs_id"/>
                  <!-- <field name="lab_type"/>
                  <field name="lab_date"/>
                  <field name="lab_doctor"/> -->
                </tree>
              </field>
            </page>
          </notebook>
        </sheet>
      </form>
    </field>
  </record>

</odoo>
